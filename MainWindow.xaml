<Window x:Class="CryptoPriceMonitor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="加密貨幣價格監控系統" Height="600" Width="1000"
        WindowStartupLocation="CenterScreen">
    
    <Window.Resources>
        <Style x:Key="PriceUpStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="Green"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>
        <Style x:Key="PriceDownStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="Red"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>
        <Style x:Key="PriceNeutralStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="Black"/>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 標題和控制區 -->
        <Border Grid.Row="0" Background="#2C3E50" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" Text="加密貨幣價格監控系統" 
                          FontSize="20" FontWeight="Bold" 
                          Foreground="White" VerticalAlignment="Center"/>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Name="StartButton" Content="開始監控" 
                           Width="80" Height="30" Margin="5,0"
                           Click="StartButton_Click"/>
                    <Button Name="StopButton" Content="停止監控" 
                           Width="80" Height="30" Margin="5,0"
                           Click="StopButton_Click" IsEnabled="False"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- 加密貨幣價格列表 -->
        <DataGrid Grid.Row="1" Name="CryptoDataGrid" 
                  AutoGenerateColumns="False" 
                  CanUserAddRows="False" 
                  CanUserDeleteRows="False"
                  IsReadOnly="True"
                  GridLinesVisibility="Horizontal"
                  HeadersVisibility="Column"
                  Margin="10">
            
            <DataGrid.Columns>
                <DataGridTextColumn Header="貨幣" Binding="{Binding Symbol}" Width="100"/>
                <DataGridTextColumn Header="名稱" Binding="{Binding Name}" Width="150"/>
                <DataGridTextColumn Header="當前價格 (USD)" Binding="{Binding Price, StringFormat=C}" Width="150"/>
                <DataGridTextColumn Header="24小時變化%" Binding="{Binding Change24h, StringFormat=F2}" Width="120">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsPositiveChange}" Value="True">
                                    <Setter Property="Foreground" Value="Green"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding IsNegativeChange}" Value="True">
                                    <Setter Property="Foreground" Value="Red"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="市值" Binding="{Binding MarketCap, StringFormat=C0}" Width="150"/>
                <DataGridTextColumn Header="最後更新" Binding="{Binding LastUpdate, StringFormat=HH:mm:ss}" Width="100"/>
                <DataGridTextColumn Header="狀態" Binding="{Binding Status}" Width="100"/>
            </DataGrid.Columns>
        </DataGrid>
        
        <!-- 狀態列 -->
        <Border Grid.Row="2" Background="#34495E" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Name="StatusTextBlock" 
                          Grid.Column="0" 
                          Text="準備就緒" 
                          Foreground="White" 
                          VerticalAlignment="Center"/>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock Text="活躍連線: " Foreground="White" VerticalAlignment="Center"/>
                    <TextBlock Name="ActiveConnectionsText" Text="0" Foreground="LightGreen" 
                              VerticalAlignment="Center" FontWeight="Bold"/>
                    <TextBlock Text=" | 更新頻率: 10秒" Foreground="White" 
                              VerticalAlignment="Center" Margin="10,0,0,0"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>